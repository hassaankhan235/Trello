{"ast":null,"code":"var _JSON$parse,\n    _jsxFileName = \"/home/khan/Desktop/Self Programming/typescript/practice/Trello/src/AppStateContect.tsx\";\n\nimport React, { createContext, useContext, useReducer, useEffect } from \"react\";\nimport { v1 as uuid } from \"uuid\";\nimport { FindItemIndexById, findObjectIDByDraggedProp, findDragStartCol, findDraggedTaskIndex } from './FinItemByIndex';\nconst appData = {\n  lists: [{\n    id: \"0\",\n    text: \"To Do\",\n    dragged: false,\n    tasks: [{\n      id: \"c0\",\n      text: \"Generate app scaffold\",\n      drag: false\n    }]\n  }, {\n    id: \"1\",\n    text: \"In Progress\",\n    dragged: false,\n    tasks: [{\n      id: \"c1\",\n      text: \"Learn Typescript\",\n      drag: false\n    }]\n  }, {\n    id: \"2\",\n    text: \"Done\",\n    dragged: false,\n    tasks: [{\n      id: \"c3\",\n      text: \"Begin to use static typing\",\n      drag: false\n    }]\n  }]\n};\nconsole.log();\nconst AppStateContext = createContext({});\n\nconst appStateReducer = (state, action) => {\n  switch (action.type) {\n    case \"ADD_LIST\":\n      {\n        return { ...state,\n          lists: [...state.lists, {\n            id: uuid(),\n            text: action.payload,\n            dragged: false,\n            tasks: []\n          }]\n        };\n      }\n\n    case \"ADD_TASK\":\n      {\n        const TargetIndex = FindItemIndexById(state.lists, action.payload.taskId);\n        state.lists[TargetIndex].tasks.push({\n          id: uuid(),\n          text: action.payload.text,\n          drag: false\n        });\n        return { ...state\n        };\n      }\n\n    case \"REMOVE_TASK\":\n      {\n        const removeIndex = FindItemIndexById(state.lists, action.payload.taskId);\n        state.lists.filter(item => item.id !== removeIndex.toString());\n        return { ...state\n        };\n      }\n\n    case \"DRAGGED_TASK\":\n      {\n        const TargetCol = FindItemIndexById(state.lists, action.payload.Cid);\n        const TaskIndex = findDraggedTaskIndex(state.lists, action.payload.taskId, action.payload.Cid);\n        state.lists[TargetCol].dragged = true;\n        state.lists[TargetCol].tasks[TaskIndex].drag = true;\n        return { ...state\n        };\n      }\n\n    case \"DRAGGED_TASK_END\":\n      {\n        const TargetCol = FindItemIndexById(state.lists, action.payload.Cid);\n        const TaskIndex = findDraggedTaskIndex(state.lists, action.payload.taskId, action.payload.Cid);\n        state.lists.map(list => {\n          if (list.dragged === true) {\n            list.dragged = false;\n          }\n\n          return { ...state\n          };\n        });\n        state.lists[TargetCol].tasks[TaskIndex].drag = false;\n        return { ...state\n        };\n      }\n\n    case \"DROP\":\n      {\n        const TargetCol = FindItemIndexById(state.lists, action.payload.Cid);\n        const TargetObjectIndex = findObjectIDByDraggedProp(state.lists);\n        const startCoulmn = findDragStartCol(state.lists);\n\n        if (TargetCol !== startCoulmn) {\n          state.lists[TargetCol].tasks.push(state.lists[startCoulmn].tasks[TargetObjectIndex]);\n          state.lists.map(list => {\n            list.dragged = false;\n            list.tasks.map(task => {\n              if (task !== null) {\n                task.drag = false;\n              }\n\n              return { ...state\n              };\n            });\n            return { ...state\n            };\n          });\n          delete state.lists[startCoulmn].tasks[TargetObjectIndex];\n        }\n\n        return { ...state\n        };\n      }\n  }\n};\n\nconst IS = localStorage.getItem('list');\nconsole.log(\"LIST IS\", JSON.parse(IS));\nconst Initial_state = (_JSON$parse = JSON.parse(IS)) !== null && _JSON$parse !== void 0 ? _JSON$parse : appData;\nexport const AppStateProvider = ({\n  children\n}) => {\n  const [state, dispatch] = useReducer(appStateReducer, Initial_state);\n  useEffect(() => localStorage.setItem('list', JSON.stringify(state)), [state]);\n  return /*#__PURE__*/React.createElement(AppStateContext.Provider, {\n    value: {\n      state,\n      dispatch\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 17\n    }\n  }, children);\n};\nexport const UseAppState = () => {\n  return useContext(AppStateContext);\n};","map":{"version":3,"sources":["/home/khan/Desktop/Self Programming/typescript/practice/Trello/src/AppStateContect.tsx"],"names":["React","createContext","useContext","useReducer","useEffect","v1","uuid","FindItemIndexById","findObjectIDByDraggedProp","findDragStartCol","findDraggedTaskIndex","appData","lists","id","text","dragged","tasks","drag","console","log","AppStateContext","appStateReducer","state","action","type","payload","TargetIndex","taskId","push","removeIndex","filter","item","toString","TargetCol","Cid","TaskIndex","map","list","TargetObjectIndex","startCoulmn","task","IS","localStorage","getItem","JSON","parse","Initial_state","AppStateProvider","children","dispatch","setItem","stringify","UseAppState"],"mappings":"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","sourcesContent":["import React, { createContext, useContext, useReducer, useEffect } from \"react\"\nimport {v1 as uuid} from \"uuid\"; \n\nimport { FindItemIndexById, findObjectIDByDraggedProp, \n    findDragStartCol, findDraggedTaskIndex } from './FinItemByIndex'\nimport {Action, Task,\n        AppState, AppStateContextProps} from './type'\n\n  \n\nconst appData: AppState = {\n    \n    lists: [\n    {\n    id: \"0\",\n    text: \"To Do\",\n    dragged: false,\n    tasks: [{ id: \"c0\", text: \"Generate app scaffold\", drag:false }]\n    },\n    {\n    id: \"1\",\n    text: \"In Progress\",\n    dragged: false,\n    tasks: [{ id: \"c1\", text: \"Learn Typescript\", drag:false }]\n    },\n    {\n    id: \"2\",\n    text: \"Done\",\n    dragged: false,\n    tasks: [{ id: \"c3\", text: \"Begin to use static typing\", drag:false }]\n    }\n    ]\n}\n\nconsole.log()\n\n\n\n\n\n    const AppStateContext = createContext<AppStateContextProps>({} as AppStateContextProps)\n\n   \n      \n    const appStateReducer = (state : AppState, action : Action) : AppState => {\n        switch(action.type){\n            case \"ADD_LIST\": {\n                return{\n                    ...state,\n                    lists : [\n                        ...state.lists, {id : uuid(), text: action.payload, dragged: false, tasks:[]}\n                    ]\n                    \n                }\n            }\n            case \"ADD_TASK\" : {\n                const TargetIndex = FindItemIndexById(state.lists, action.payload.taskId)\n                state.lists[TargetIndex].tasks.push({\n                    id: uuid(),\n                    text: action.payload.text,\n                    drag:false \n                })\n                return{\n                    ...state\n                }\n            }\n            case \"REMOVE_TASK\" : {\n                const removeIndex = FindItemIndexById(state.lists, action.payload.taskId)\n                state.lists.filter(item => item.id !== removeIndex.toString() )\n                return{\n                    ...state\n                }\n            }\n            case \"DRAGGED_TASK\" : {\n                const TargetCol = FindItemIndexById(state.lists, action.payload.Cid)\n       \n                const TaskIndex = \n                findDraggedTaskIndex(state.lists, action.payload.taskId, action.payload.Cid)\n                state.lists[TargetCol].dragged = true\n                state.lists[TargetCol].tasks[TaskIndex].drag = true \n                return{\n                    ...state\n                }\n                }\n            case \"DRAGGED_TASK_END\" : {\n                const TargetCol = FindItemIndexById(state.lists, action.payload.Cid)\n                const TaskIndex = \n                findDraggedTaskIndex(state.lists, action.payload.taskId, action.payload.Cid)\n                state.lists.map(list => {if(list.dragged===true) \n                    { list.dragged = false} \n                return {...state}} )\n                state.lists[TargetCol].tasks[TaskIndex].drag = false\n                return{\n                    ...state\n                }\n            }\n            \n            case \"DROP\": {\n                const TargetCol = FindItemIndexById(state.lists, action.payload.Cid)\n                const TargetObjectIndex = findObjectIDByDraggedProp(state.lists)\n                const startCoulmn = findDragStartCol(state.lists)\n                if(TargetCol !== startCoulmn)\n                {\n                    state.lists[TargetCol].tasks.push(state.lists[startCoulmn].tasks[TargetObjectIndex])\n                state.lists.map(list => {\n                    list.dragged = false\n                    list.tasks.map((task : Task) => {\n                        if(task !== null){\n                            task.drag = false\n                        }\n                    return{...state}})\n                    return{...state}\n                })\n                delete state.lists[startCoulmn].tasks[TargetObjectIndex]\n                }\n                \n                return{\n                    ...state\n                }\n            }\n            }\n        }                           \n\n    const IS = localStorage.getItem('list') as string \n    console.log(\"LIST IS\", JSON.parse(IS))\n    const Initial_state = JSON.parse(IS) ?? appData\n    export const AppStateProvider = ({children} : React.PropsWithChildren<{}>) => {\n        const [state, dispatch] = useReducer(appStateReducer, Initial_state)\n        useEffect(() => localStorage.setItem('list',JSON.stringify(state)),[state])\n            return(\n                <AppStateContext.Provider value = {{state, dispatch}}>\n                    {children}\n                </AppStateContext.Provider>\n            )\n        }\n\n    export const UseAppState = () => {\n        return useContext(AppStateContext)\n    }"]},"metadata":{},"sourceType":"module"}